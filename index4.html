<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyFakeStoreAPI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="ico.png">

    <script>
        i = 0;
        var itemsList = [];
        var filteredList = [];
        var priceList = [];
        var feedbackList = [];
        function init() {

            fetch("https://fakestoreapi.com/products/")
                .then(data => data.json())
                //.then(x => console.log(x))
                .then(adat => {
                    adat.forEach(element => {
                        itemsList.push(element);
                    });
                })
                .then(() => console.log(itemsList))
                .then(() => chooseCategory());
        }
        /*itemsList.forEach(element => {
                console.log(element.rating.rate, element.rating.count);
            }); */
        function kiir() {
            if (feedbackList.length == 0) {
                document.getElementById("items").innerHTML = "<h2 style='color: blue;'>Találatok száma: " + salesList.length;
            }
            else {
                document.getElementById("items").innerHTML = "<h2 style='color: blue;'>Találatok száma: " + salesList.length;

                document.getElementById("items").innerHTML += "<div class='card' style='width: 25rem;'><img src='" + salesList[i].image + "' class='card-img-top' alt='...' style='height:300px;'><div class='card-body'><h5 class='card-title'>" + salesList[i].title + "</h5><h4 class='card-text'>" + salesList[i].price + "€</h4><p class='card-text'><b>Kategória: </b>" + salesList[i].category + "</p><p class='card-text'><b>Termékek a választott kategáriákban: </b>" + salesList.length + "</p><a href='#'' class='btn btn-primary'>Add to cart</a></div></div>";

            }
        }
        function Elore() {
            //document.getElementById("items").innerHTML = "";
            if (i >= salesList.length) i = 0;
            else if (i < salesList.length) i++;
            kiir();
        }

        function Hatra() {
            //document.getElementById("items").innerHTML = "";
            if (i <= 0) i = salesList.length;
            else if (i > 0) i--;
            kiir();
        }
        function chooseCategory() {
            //i = 0;
            filteredList = [];
            itemsList.forEach(item => {
                if (document.getElementById("men-clothing").checked && item.category == "men's clothing") {
                    filteredList.push(item);
                }
                if (document.getElementById("jewelery").checked && item.category == "jewelery") {
                    filteredList.push(item);
                }
                if (document.getElementById("electronics").checked && item.category == "electronics") {
                    filteredList.push(item);
                }
                if (document.getElementById("women-clothing").checked && item.category == "women's clothing") {
                    filteredList.push(item);
                }
                //console.log(filteredList.length, itemsList.length);
                filterByPrice();
            });
        }
        function mindenKategoria() {
            document.getElementById("men-clothing").checked = true;
            document.getElementById("jewelery").checked = true;
            document.getElementById("electronics").checked = true;
            document.getElementById("women-clothing").checked = true;
            filteredList = itemsList;
            chooseCategory();
        }
        function egyikKategoriaSem() {
            document.getElementById("men-clothing").checked = false;
            document.getElementById("jewelery").checked = false;
            document.getElementById("electronics").checked = false;
            document.getElementById("women-clothing").checked = false;
            filteredList = [];
            salesList = [];
            kiir();
        }
        function mindenAr() {
            document.getElementById("price-10").checked = true;
            document.getElementById("price-100").checked = true;
            document.getElementById("price-50").checked = true;
            document.getElementById("price-from-100").checked = true;
            filteredList = itemsList;
            chooseCategory();
        }
        function egyikArSem() {
            document.getElementById("price-10").checked = false;
            document.getElementById("price-100").checked = false;
            document.getElementById("price-50").checked = false;
            document.getElementById("price-from-100").checked = false;
            filteredList = [];
            salesList = [];
            kiir();
        }
        function allFeedback() {
            document.getElementById("feedback1").checked = true;
            document.getElementById("feedback2").checked = true;
            document.getElementById("feedback3").checked = true;
            document.getElementById("feedback4").checked = true;
            filteredList = itemsList;
            chooseCategory();
        }
        function noneFeedback() {
            document.getElementById("feedback1").checked = false;
            document.getElementById("feedback2").checked = false;
            document.getElementById("feedback3").checked = false;
            document.getElementById("feedback4").checked = false;
            filteredList = [];
            salesList = [];
            kiir();
        }

        function allSales() {
            document.getElementById("sales1").checked = true;
            document.getElementById("sales2").checked = true;
            document.getElementById("sales3").checked = true;
            document.getElementById("sales4").checked = true;
            filteredList = itemsList;
            chooseCategory();
        }
        function noneSales() {
            document.getElementById("sales1").checked = false;
            document.getElementById("sales2").checked = false;
            document.getElementById("sales3").checked = false;
            document.getElementById("sales4").checked = false;
            filteredList = [];
            salesList = [];
            kiir();
        }

        function filterByPrice() {
            priceList = [];
            filteredList.forEach(element => {
                if (document.getElementById("price-10").checked && element.price < 10) {
                    priceList.push(element);
                }
                if (document.getElementById("price-100").checked && element.price >= 10 && element.price < 50) {
                    priceList.push(element);
                }
                if (document.getElementById("price-50").checked && element.price >= 50 && element.price < 100) {
                    priceList.push(element);
                }
                if (document.getElementById("price-from-100").checked && element.price >= 100) {
                    priceList.push(element);
                }
                filterByFeedback();
            });
            console.log(priceList.length);



            //kiir();
        }

        function filterByFeedback() {
            feedbackList = [];
            priceList.forEach(element => {
                if (document.getElementById("feedback1").checked && element.rating.rate < 2) {
                    feedbackList.push(element);
                }
                if (document.getElementById("feedback2").checked && element.rating.rate >= 2 && element.rating.rate < 3) {
                    feedbackList.push(element);
                }
                if (document.getElementById("feedback3").checked && element.rating.rate >= 3 && element.rating.rate < 4) {
                    feedbackList.push(element);
                }
                if (document.getElementById("feedback4").checked && element.rating.rate >= 4) {
                    feedbackList.push(element);
                }

            });
            console.log(feedbackList.length);
            filterBySales();
        }

        function filterBySales() {
            salesList = [];
            feedbackList.forEach(element => {
                if (document.getElementById("sales1").checked && element.rating.count < 100) {
                    salesList.push(element);
                }
                if (document.getElementById("sales2").checked && element.rating.count >= 100 && element.rating.count < 250) {
                    salesList.push(element);
                }
                if (document.getElementById("sales3").checked && element.rating.count >= 250 && element.rating.count < 400) {
                    salesList.push(element);
                }
                if (document.getElementById("sales4").checked && element.rating.count >= 400) {
                    salesList.push(element);
                }

            });
            console.log(salesList.length);



            kiir();
        }
    </script>
</head>

<body onload="init()">
    <div class="container" id="container">
        <ul class="nav nav-pills">
            <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Active</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button"
                    aria-expanded="false">Dropdown</a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Action</a></li>
                    <li><a class="dropdown-item" href="#">Another action</a></li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">Separated link</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
            </li>
        </ul>
    </div>
    <div class="header">
        <h1>My Fake Store</h1>

    </div>
    <div class="category-choice">
        <h5>Category</h5>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="men-clothing" checked onclick="chooseCategory()">
            <label class="form-check-label" for="flexSwitchCheckChecked">Men's clothing</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="jewelery" checked onclick="chooseCategory()">
            <label class="form-check-label" for="flexSwitchCheckChecked">Jewelery</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="electronics" checked onclick="chooseCategory()">
            <label class="form-check-label" for="flexSwitchCheckChecked">Electronics</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="women-clothing" onclick="chooseCategory()">
            <label class="form-check-label" for="flexSwitchCheckChecked">Women's clothing</label>
        </div>

        <input type="button" class="btn btn-warning" value="All categories" onclick="mindenKategoria()">
        <input type="button" class="btn btn-warning" value="Neither category" onclick="egyikKategoriaSem()">
    </div>
    <div class="price">
        <h5>Price</h5>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="price-10" checked onclick="filterByPrice()">
            <label class="form-check-label" for="flexSwitchCheckChecked">1-9.9€</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="price-50" checked onclick="filterByPrice()">
            <label class="form-check-label" for="flexSwitchCheckChecked">10-49.9€</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="price-100" checked onclick="filterByPrice()">
            <label class="form-check-label" for="flexSwitchCheckChecked">50-99.9€</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="price-from-100" onclick="filterByPrice()">
            <label class="form-check-label" for="flexSwitchCheckChecked">100€-</label>
        </div>

        <input type="button" class="btn btn-warning" value="All prices" onclick="mindenAr()">
        <input type="button" class="btn btn-warning" value="Neither price" onclick="egyikArSem()">
    </div>

    <div class="rating">
        <h5>Customer's feedback</h5>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="feedback1" checked onclick="filterByFeedback()">
            <label class="form-check-label" for="flexSwitchCheckChecked">1-1,9</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="feedback2" checked onclick="filterByFeedback()">
            <label class="form-check-label" for="flexSwitchCheckChecked">2-2,9</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="feedback3" checked onclick="filterByFeedback()">
            <label class="form-check-label" for="flexSwitchCheckChecked">3-3,9</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="feedback4" onclick="filterByFeedback()">
            <label class="form-check-label" for="flexSwitchCheckChecked">4-4,9</label>
        </div>

        <input type="button" class="btn btn-warning" value="All feedbacks" onclick="allFeedback()">
        <input type="button" class="btn btn-warning" value="Neither feedback" onclick="noneFeedback()">
    </div>

    <div class="sales">
        <h5>Number of sales</h5>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="sales1" checked onclick="filterBySales()">
            <label class="form-check-label" for="flexSwitchCheckChecked">1-99</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="sales2" checked onclick="filterBySales()">
            <label class="form-check-label" for="flexSwitchCheckChecked">100-199</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="sales3" checked onclick="filterBySales()">
            <label class="form-check-label" for="flexSwitchCheckChecked">200-299</label>
        </div>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="sales4" onclick="filterBySales()">
            <label class="form-check-label" for="flexSwitchCheckChecked">400-</label>
        </div>

        <input type="button" class="btn btn-warning" value="All " onclick="allSales()">
        <input type="button" class="btn btn-warning" value="None" onclick="noneSales()">
    </div>

    <div class="hatra">
        <a href='#'' class=' btn btn-success' onclick="Hatra()">Hátra</a>
        <a href='#'' class=' btn btn-success elore' onclick="Elore()">Előre</a>


    </div>

    <div id="items"></div>




</body>

</html>